<div id="note-{{ note.pk }}" class="bg-gray-50 rounded-lg p-3 group">
    <div class="flex items-start justify-between">
        <div class="flex-1 min-w-0">
            {% if note.title %}
            <h4 class="text-sm font-medium text-gray-800 flex items-center gap-1">
                {% if note.is_pinned %}
                <svg class="w-3 h-3 text-indigo-500" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.615 1.738 4.346a1 1 0 01-.646 1.283l-.057.016-4.282 1.029-1.15 4.598a1 1 0 01-1.94-.002l-1.149-4.596-4.282-1.03a1 1 0 01-.702-1.298l1.738-4.346-1.234-.616a1 1 0 01.895-1.789l1.599.8L9 4.322V3a1 1 0 011-1z"/>
                </svg>
                {% endif %}
                {{ note.title }}
            </h4>
            {% endif %}
            <div class="text-sm text-gray-600 mt-1 prose prose-sm max-w-none">
                {{ note.content_html|safe }}
            </div>
            <p class="text-xs text-gray-400 mt-2">{{ note.created_at|date:"M j, g:i A" }}</p>
        </div>
        <div class="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity ml-2">
            <button hx-post="{% url 'tasks:note_toggle_pin' note.pk %}"
                    hx-target="#note-{{ note.pk }}"
                    hx-swap="outerHTML"
                    class="p-1 rounded {% if note.is_pinned %}text-indigo-500{% else %}text-gray-300 hover:text-indigo-500{% endif %}" title="Pin">
                <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 2a1 1 0 011 1v1.323l3.954 1.582 1.599-.8a1 1 0 01.894 1.79l-1.233.615 1.738 4.346a1 1 0 01-.646 1.283l-.057.016-4.282 1.029-1.15 4.598a1 1 0 01-1.94-.002l-1.149-4.596-4.282-1.03a1 1 0 01-.702-1.298l1.738-4.346-1.234-.616a1 1 0 01.895-1.789l1.599.8L9 4.322V3a1 1 0 011-1z"/>
                </svg>
            </button>
            <a href="{% url 'tasks:note_edit' note.pk %}" class="p-1 text-gray-300 hover:text-gray-600 rounded" title="Edit">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                </svg>
            </a>
            <button hx-post="{% url 'tasks:note_delete' note.pk %}"
                    hx-target="#note-{{ note.pk }}"
                    hx-swap="outerHTML"
                    hx-confirm="Delete this note?"
                    class="p-1 text-gray-300 hover:text-red-500 rounded" title="Delete">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
    </div>
</div>
